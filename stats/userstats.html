<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <script src="https://www.gstatic.com/firebasejs/5.9.2/firebase.js"></script>
    <script src="../scripts/userstats.js">
    </script>
    <script>
        
        var config = {
          databaseURL: "https://amqstats.firebaseio.com",
          projectId: "amqstats",
          messagingSenderId: "327250267342"
        };
        firebase.initializeApp(config);
        const fsDatabase = firebase.firestore();
        fsDatabase.collection('users').where("username", "==", window.location.hash.substring(1)).get().then((snapshot, value) => {
            if(snapshot.docs.length > 0){
                snapshot.docs.forEach(doc => {
                    renderUser(doc);
                });
            }else{
                document.getElementById("userstats").hidden = true;
                document.getElementById("username").hidden = true;
                document.getElementsByClassName("database-field").hidden = true;

            }
        });
      </script>
      <script>
            function updateSearch(value){
              window.location.href = "/stats/userstats.html#" + value;
              window.location.replace(window.location.href);
            }
          </script>
  </head>
  <body>
    <div class="head">
      <div class="menu">
        <a href="/" id="link-home" class="menuitem clickable-menuitem">HOME</a>
        <a href="/stats/" id="link-stats" class="menuitem clickable-menuitem">STATS</a>
        <input onchange="updateSearch(this.value)" class="usersearch" type="text" placeholder="Search...">
      </div>
    </div>
    <div class="content">
        <div id="userstats" class="userstats">
            <div class="username" id="username">
                Placeholder
            </div>
            <div class="database-field">
                <div class="database-stats">Number of Games</div><div id="numberofgames" class="database-stats">0</div>
            </div>
            <div class="database-field">
                <div class="database-stats">Correct Guesses</div><div id="correctguesses" class="database-stats">0</div>
            </div>
            <div class="database-field">
                <div class="database-stats">From Anime List</div><div id="frommal" class="database-stats">0</div>
            </div>
        </div>
        <div id="gamesin">

        </div>
    </div>
  </body>
</html>
